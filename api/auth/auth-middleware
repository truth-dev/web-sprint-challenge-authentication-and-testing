const Users = require('../users/user-model')

async function checkUsernameFree (req, res, next)  {
    try{
        const users = await Users.findBy({username: req.body.username})
        if(!users.length){
            next()
        }else{
            res.status(422).json({message: 'username taken'})   
        }
    }catch(err){
        next(err)
    }
}   

module.exports = {
    checkUsernameFree
}